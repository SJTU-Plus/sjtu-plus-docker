:80 {
    @s {
        not path /static/*
        not path /course-plus*
        not path /course-plus-data*
        not path /libsjtu*
        not path /monitor*
        not path /admin-monitor*
        not path /download/*
    }
    @hidden {
        path */.*
    }
    @monitor {
        path /monitor*
    }
    @monitor_admin {
        path /admin-monitor*
    }
    @captcha_solver {
        path /captcha-solver*
    }
    encode gzip
    reverse_proxy @s sjtu-plus:5000
    reverse_proxy @monitor grafana:3000
    reverse_proxy @monitor_admin grafana-private:3000
    reverse_proxy @captcha_solver captcha-solver:8080
    respond @hidden 404
    root * /srv
    file_server
}
